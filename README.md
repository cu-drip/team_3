# üìù –ö–æ–Ω—Ç—Ä–∞–∫—Ç SSlaves: CompetitionService, CompetitionEngine

## –û–ø–∏—Å–∞–Ω–∏–µ

**CompetitionService** –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:

* —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π,
* —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏–≥—Ä–æ–∫–æ–≤ –∏ –∫–æ–º–∞–Ω–¥,
* —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ –∏ –∫–≤–æ—Ç–∞–º–∏,
* –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–∞–º.
  –û–±—â–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –ø–æ REST/JSON (–≤–æ–∑–º–æ–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ gRPC –≤ –±—É–¥—É—â–µ–º).

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Database Schema Proposal)

`User`

–•—Ä–∞–Ω–∏—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

```text
id: UUID
name: string
surname: string
email: string
hashed_password: string
is_admin: boolean
date_of_birth: date
age: int
sex: enum('male', 'female', 'other')
weight: float
height: float
mmr: float
created_at: timestamp
bio: string?              -- –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
is_organizer: boolean     -- –º–æ–∂–µ—Ç –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä—ã
avatar_url: string?       -- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–≤–∞—Ç–∞—Ä
```

`Team`

```text
id: UUID
name: string
created_at: timestamp
owner_id: UUID (FK ‚Üí User.id)

```

`TeamMembership`

```text
team_id: UUID (FK ‚Üí Team.id)
user_id: UUID (FK ‚Üí User.id)
role: enum('captain', 'player')
joined_at: timestamp
PRIMARY KEY(team_id, user_id)
```

`Tournament`

```text
id: UUID
title: string
description: string
sport: string
type_group: enum('olympic', 'swiss', 'round_robin')
start_time: timestamp
created_at: timestamp
entry_cost: decimal
is_team_based: boolean
max_participants: int
organizer_id: UUID (FK ‚Üí User.id)
```

`TournamentRegistration`

```text
tournament_id: UUID
participant_id: UUID     -- –º–æ–∂–µ—Ç –±—ã—Ç—å user_id –∏–ª–∏ team_id
participant_type: enum('user', 'team')
registered_at: timestamp
status: enum('pending', 'accepted', 'rejected')
PRIMARY KEY(tournament_id, participant_id)

```

# API (REST JSON –∏–ª–∏ —Ä–µ—à–∏–º –ø–æ—Ç–æ–º, –º–æ–∂–µ—Ç gRPC)

## Tournament CRUD

| –ú–µ—Ç–æ–¥    | Endpoint            | –û–ø–∏—Å–∞–Ω–∏–µ                       |
|----------|---------------------|--------------------------------|
| `POST`   | `/tournaments`      | –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞               |
| `GET`    | `/tournaments`      | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤ |
| `GET`    | `/tournaments/{id}` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—É—Ä–Ω–∏—Ä–µ |
| `PUT`    | `/tournaments/{id}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞             |
| `DELETE` | `/tournaments/{id}` | –£–¥–∞–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞               |

## Team CRUD

| –ú–µ—Ç–æ–¥    | Endpoint      | –û–ø–∏—Å–∞–Ω–∏–µ                       |
|----------|---------------|--------------------------------|
| `POST`   | `/teams`      | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã               |
| `GET`    | `/teams`      | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥        |
| `GET`    | `/teams/{id}` | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–∞–Ω–¥–µ |
| `PUT`    | `/teams/{id}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã             |
| `DELETE` | `/teams/{id}` | –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã               |

## –£—á–∞—Å—Ç–∏–µ –≤ —Ç—É—Ä–Ω–∏—Ä–∞—Ö

| –ú–µ—Ç–æ–¥    | Endpoint                               | –û–ø–∏—Å–∞–Ω–∏–µ                   |
|----------|----------------------------------------|----------------------------|
| `POST`   | `/tournaments/{id}/register`           | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã/–∏–≥—Ä–æ–∫–∞ |
| `GET`    | `/tournaments/{id}/participants`       | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ |
| `PUT`    | `/tournaments/{id}/participants/{pid}` | –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏     |
| `DELETE` | `/tournaments/{id}/participants/{pid}` | –£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞          |

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CompetitionEngine

| –û–±–º–µ–Ω                   | –§–æ—Ä–º–∞—Ç | Endpoint (–ø—Ä–∏–º–µ—Ä–Ω—ã–π)                      | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
|-------------------------|--------|-------------------------------------------|-------------------------------------------|
| –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–∞ | JSON   | `POST /engine/init`                       | –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—É—Ä–Ω–∏—Ä–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è |
| –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è    | JSON   | `GET /engine/schedule?tournament_id={id}` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–∞—Ç—á–µ–π                    |
| –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞     | JSON   | `POST /engine/match-result`               | CompetitionEngine —Å–æ–æ–±—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä |

## –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç          | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å                                                                            |
|--------------------|--------------------------------------------------------------------------------------------|
| CompetitionService | CRUD —Ç—É—Ä–Ω–∏—Ä–æ–≤ –∏ –∫–æ–º–∞–Ω–¥, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–≤–æ—Ç–∞–º–∏ –∏ –∑–∞—è–≤–∫–∞–º–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| CompetitionEngine  | –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Ç—á–µ–π, –ª–æ–≥–∏–∫–∞ —Ç—É—Ä–Ω–∏—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –ø–æ–¥—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤                                 |

## –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

* –ö–∞–∫ –∏–º–µ–Ω–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞, user_id –∏ team_id –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –∏–ª–∏ –¥–≤—É—Ö?

* –ö–∞–∫ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Å–Ω–∞—á–∞–ª–∞ –≤–∏–¥–∏–º–æ –ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∑–∞–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç?

* –ù—É–∂–Ω–∞ –ª–∏ –≤ mvp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (–µ—Å–ª–∏ entry_cost > 0)?

* –ö–∞–∫ –±—É–¥–µ–º —É–≤–µ–¥–æ–º–ª—è—Ç—å, —á–µ—Ä–µ–∑ email, —á–µ—Ä–µ–∑ SMTP, Firebase, –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤ –±–∞–∑–µ —Ö—Ä–∞–Ω–∏—Ç—å _—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è_?

* –ï—â—ë –ø–æ —Å—É—Ç–∏ –Ω–∞–¥–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Ç–æ–≥–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, —Ç–æ–∂–µ –ø–æ–¥—É–º–∞—Ç—å –æ–± —ç—Ç–æ–º.

## Devops / –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

* Docker based –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤?

* –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL (–æ–¥–Ω–∞ –∏–ª–∏ –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º)?

* REST API –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏?

* –ö–∞–∫ –º—ã –ø–∏—à–µ–º –¥–æ–∫—É, –±—É–¥–µ—Ç –ª–∏ OpenAPI/swagger.json

